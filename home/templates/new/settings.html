{% extends 'new/base.html' %}
{% load widget_tweaks %}
{% load static %}

{% block content %}
<script type="text/javascript" src="{% static "ckeditor/ckeditor-init.js" %}"></script>
<script type="text/javascript" src="{% static "ckeditor/ckeditor/ckeditor.js" %}"></script>
    <!-- Body: Body -->
        <div class="body d-flex py-lg-3 py-md-2">
            <div class="container-xxl">
                <div class="row align-items-center">
                    <div class="border-0 mb-4">
                        <div class="card-header p-0 no-bg bg-transparent d-flex align-items-center px-0 justify-content-between border-bottom flex-wrap">
                            <h3 class="fw-bold py-3 mb-0">System Settings</h3>
                            <div class="d-flex py-2 project-tab flex-wrap w-sm-100">
                                <button type="button" class="btn btn-dark w-sm-100" data-bs-toggle="modal" data-bs-target="#createproject"><i class="icofont-plus-circle me-2 fs-6"></i>Create Application</button>
                                <ul class="nav nav-tabs tab-body-header rounded ms-3 prtab-set w-sm-100" role="tablist">
                                    <li class="nav-item"><a class="nav-link active" data-bs-toggle="tab" href="#All-list" role="tab">Meta Deta</a></li>
                                    <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#Started-list" role="tab">Applications</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div> <!-- Row end  -->
                <div class="row align-items-center">
                    <div class="col-lg-12 col-md-12 flex-column">
                        <div class="tab-content">
                            <div class="tab-pane fade show active" id="All-list">
                                <div class="row justify-content-md-center">
                                    <div class="col-xxl-6 col-xl-6 col-lg-6 col-md-6 col-sm-6">
                                        <form method="post"> {% csrf_token %}
                                            <div class="alert alert-primary">
                                                <h6 class="fw-bold mb-1">Institutional Information</h6>
                                                <div class="my-3 ">
                                                    {% render_field form.name class="form-control form-control-lg" placeholder="Institution Name" value=account.institution.name %}
                                                </div>
                                                <div class="my-3">
                                                    {% render_field form.address class="form-control form-control-lg" placeholder="Institution Name" value=account.institution.address %}
                                                </div>
                                                <div class="my-3">
                                                    {% render_field form.logo class="form-control form-control-lg"  %}
                                                </div>
                                                <button class="btn btn-primary mt-2">Update Institutional Information</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="Started-list">
                                <div class="row g-3 gy-5 py-3 row-deck">
                                    {% for application in applications %}
                                        <div class="col-xxl-4 col-xl-4 col-lg-4 col-md-6 col-sm-6">
                                            <div class="card">
                                                <div class="card-body">
                                                    <div class="d-flex align-items-center justify-content-between mt-5">
                                                        <div class="lesson_name">
                                                            <div class="project-block light-info-bg">
                                                                {% if application.category == 'B.SC' %}
                                                                    <i class="icofont-paint"></i>
                                                                {% elif application.category == 'HND' %}
                                                                    <i class="icofont-vector-path"></i>
                                                                {% elif application.category == 'M.Sc' %}
                                                                     <i class="icofont-ui-touch-phone"></i>
                                                                {% elif application.category == 'PGD' %}
                                                                <i class="icofont-group-students "></i>
                                                                {% elif application.category == 'PHD' %}
                                                                <i class="icofont-ui-text-chat"></i>
                                                                {% elif application.category == 'Dip' %}
                                                                <i class="icofont-ui-clock"></i> 
                                                                {% elif application.category == 'NCE' %}
                                                                <i class="icofont-dashboard-web"></i>
                                                                {% endif %}
                                                            </div>
                                                            <span class="small text-muted project_name fw-bold"> {{ application.category }} </span>
                                                            <h6 class="mb-0 fw-bold  fs-6  mb-2">{{ application.name }}</h6>
                                                        </div>
                                                        <div class="btn-group" role="group" aria-label="Basic outlined example">
                                                            <button type="button" class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#editproject{{ application.id }}"><i class="icofont-edit text-success"></i></button>
                                                            <button type="button" class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#deleteproject"><i class="icofont-ui-delete text-danger"></i></button>
                                                        </div>
                                                    </div>
                                                    <div class="row g-2 pt-4">
                                                        <div class="col-12">
                                                            <div class="d-flex align-items-center">
                                                                <i class="icofont-paper-clip"></i>
                                                                <span class="ms-2">Student Applied: {{ application.application_set.count }}</span>
                                                            </div>
                                                        </div>                      

                                                </div>
                                            </div>
                                        </div>
                                    {% endfor %}
                                    
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!-- Create Project-->
        <div class="modal fade" id="createproject" tabindex="-1"  aria-hidden="true">
            <form method="post"> {% csrf_token %}
                <div class="modal-dialog modal-dialog-centered modal-md modal-dialog-scrollable">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title  fw-bold" id="createprojectlLabel"> Create an Application</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="mb-3">
                                <label for="exampleFormControlInput77" class="form-label">Application Name</label>
                                {% render_field appform.name type="text" class="form-control" id="exampleFormControlInput77" placeholder="Application Name" %}
                            </div>
                            <div class="mb-3">
                                <label for="formFileMultipleone" class="form-label">Category</label>
                                {% render_field appform.category class="form-control"  %}
                            </div>
                            <div class="mb-3">
                                <label for="exampleFormControlTextarea78" class="form-label">Template</label>
                                {% render_field appform.template  class="form-control" id="exampleFormControlTextarea78"  placeholder="Application Fee"   %}
                            </div>
                            <div class="mb-3">
                                <label for="exampleFormControlTextarea78" class="form-label">Fee</label>
                                {% render_field appform.fee  class="form-control" placeholder="Application Fee"   %}
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Done</button>
                            <button type="submit" class="btn btn-primary">Create</button>
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <!-- Edit Project-->
        {% for application in applications%}
            <div class="modal fade" id="editproject{{ application.id }}" tabindex="-1"  aria-hidden="true">
                <form method="post"> {% csrf_token %}
                    <div class="modal-dialog modal-dialog-centered modal-md modal-dialog-scrollable">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title  fw-bold" id="createprojectlLabel"> Update Application</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <div class="mb-3">
                                    <label for="exampleFormControlInput77" class="form-label">Application Name</label>
                                    {% render_field appform.name value=application.name type="text" class="form-control" id="exampleFormControlInput77" placeholder="Application Name" %}
                                </div>
                                <div class="mb-3">
                                    <label for="formFileMultipleone" class="form-label">Category</label>
                                    <input type="text" value={{application.category}} class="form-control" />
                                </div>
                                <div class="mb-3">
                                    <label  class="form-label">Template</label>
                                    {% render_field appform.template  value=application.template class="form-control"  %}
                                </div>
                                <div class="mb-3">
                                    <label for="exampleFormControlTextarea78" class="form-label">Fee</label>
                                    {% render_field appform.fee  value=application.fee class="form-control" placeholder="Application Fee"   %}
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Done</button>
                                <button type="submit" class="btn btn-primary">Create</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        {% endfor %}

        <!-- Modal  Delete Folder/ File-->
        <div class="modal fade" id="deleteproject" tabindex="-1"  aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-md modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title  fw-bold" id="deleteprojectLabel"> Delete item Permanently?</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body justify-content-center flex-column d-flex">
                    <i class="icofont-ui-delete text-danger display-2 text-center mt-2"></i>
                    <p class="mt-4 fs-5 text-center">You can only delete this item Permanently</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger color-fff">Delete</button>
                </div>
            </div>
            </div>
        </div>
{% endblock %}
